# ============================================================================
# OpenMemory API 环境变量配置示例
# ============================================================================
# 使用方法：
# 1. 复制此文件为 .env: cp .env.example .env
# 2. 根据实际情况修改配置值
# 3. 注意：不要将 .env 文件提交到版本控制系统
# ============================================================================

# ============================================================================
# 基础配置
# ============================================================================
# 用户ID（用于关联记忆）
USER=default_user

# 默认应用ID
DEFAULT_APP_ID=openmemory

# API 服务配置
HOST=0.0.0.0
PORT=8765
RELOAD=true

# Uvicorn Workers 数量（Docker Compose 中使用）
UVICORN_WORKERS=2

# ============================================================================
# 数据库配置
# ============================================================================
# 数据库连接URL
# SQLite 示例: sqlite:///./openmemory.db
# MySQL 示例: mysql+pymysql://user:password@host:port/database
# PostgreSQL 示例: postgresql://user:password@host:port/database
DATABASE_URL=sqlite:///./openmemory.db

# 数据库连接池配置（仅对 MySQL/PostgreSQL 等数据库有效）
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_PRE_PING=true

# ============================================================================
# LLM 配置
# ============================================================================
# LLM Provider (openai, ollama, anthropic 等)
LLM_PROVIDER=openai

# OpenAI 配置
OPENAI_API_KEY=sk-your-api-key-here
OPENAI_MODEL=gpt-4o-mini
OPENAI_BASE_URL=

# LLM 参数
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=2000

# ============================================================================
# Embedder 配置
# ============================================================================
# Embedder Provider (openai, ollama 等)
EMBEDDER_PROVIDER=openai

# Embedder 模型配置
EMBEDDER_MODEL=text-embedding-3-small
EMBEDDER_DIMS=1536
EMBEDDER_BASE_URL=

# Ollama 配置（如果使用 Ollama 作为 LLM 或 Embedder）
OLLAMA_HOST=

# ============================================================================
# 向量数据库配置
# ============================================================================
# 向量数据库 Provider（可选，系统会自动检测）
# 支持: tencent_vectordb, chroma, qdrant, weaviate, redis, pgvector, milvus, elasticsearch, opensearch, faiss
VECTOR_STORE_PROVIDER=

# 向量数据库集合名称
VECTOR_STORE_COLLECTION_NAME=openmemory
VECTOR_STORE_HOST=mem0_store

# --- 腾讯云向量数据库配置（必填项）---
# 如果使用腾讯云向量数据库，以下三个配置项是必填的
TENCENT_VECTORDB_URL=
TENCENT_VECTORDB_KEY=
TENCENT_VECTORDB_USERNAME=
# 可选配置
TENCENT_VECTORDB_DATABASE_NAME=openmemory
TENCENT_VECTORDB_COLLECTION_NAME=openmemory_collection
TENCENT_VECTORDB_EMBEDDING_MODEL_DIMS=1536
TENCENT_VECTORDB_METRIC_TYPE=cosine
TENCENT_VECTORDB_TIMEOUT=60

# --- Chroma 配置 ---
CHROMA_HOST=
CHROMA_PORT=

# --- Qdrant 配置 ---
QDRANT_HOST=
QDRANT_PORT=6333

# --- Weaviate 配置 ---
WEAVIATE_CLUSTER_URL=
WEAVIATE_HOST=
WEAVIATE_PORT=

# --- Redis 配置 ---
REDIS_URL=

# --- PGVector 配置 ---
PG_HOST=
PG_PORT=
PG_DB=
PG_USER=
PG_PASSWORD=

# --- Milvus 配置 ---
MILVUS_HOST=
MILVUS_PORT=
MILVUS_TOKEN=
MILVUS_DB_NAME=
MILVUS_EMBEDDING_DIMS=1536

# --- Elasticsearch 配置 ---
ELASTICSEARCH_HOST=
ELASTICSEARCH_PORT=
ELASTICSEARCH_USER=
ELASTICSEARCH_PASSWORD=
ELASTICSEARCH_EMBEDDING_DIMS=1536

# --- OpenSearch 配置 ---
OPENSEARCH_HOST=
OPENSEARCH_PORT=

# --- FAISS 配置 ---
FAISS_PATH=
FAISS_EMBEDDING_DIMS=1536

# ============================================================================
# Neo4j 图数据库配置
# ============================================================================
# 是否启用 Neo4j 双写
NEO4J_ENABLE_DUAL_WRITE=true

# Neo4j 代理 URL
NEO4J_PROXY_URL=http://localhost:8090

# Neo4j 代理超时时间（秒）
NEO4J_DUAL_WRITE_TIMEOUT=60

# ============================================================================
# 日志配置
# ============================================================================
# 日志级别: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# 日志输出位置: file, console, both
LOG_OUTPUT=file

# 日志文件名
LOG_FILE=api.log

# 日志目录
LOG_DIR=logs

# 单个日志文件最大大小（支持单位: K/KB, M/MB, G/GB）
LOG_MAX_BYTES=10M

# 保留的备份文件数量
LOG_BACKUP_COUNT=5
